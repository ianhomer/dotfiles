#!/usr/bin/env python3

#
# Take a stream from things-search where the first two columns are the file and
# then line number for the match and prepend the line with a string that allows
# sorting ontime modified of file and line number. This prepare content for fzf
# efficiently.
#
import sys
import os.path

if __name__ == "__main__":
    for line in sys.stdin:
        first = line.find(":")
        second = line.find(":", first+1)
        file = line[:first]
        index2 = str(1000 + int(line[first+1:second]))
        index1 = str(10000000000 - int(os.path.getmtime(file)))
        out = index1 + "-" + index2 + ":" + line
        sys.stdout.write(out)
